<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Propeller - Settings</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        .propeller-font {
            font-family: 'Orbitron', monospace;
        }
        
        .sidebar-transition { 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .scrollbar-hide { 
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .scrollbar-hide::-webkit-scrollbar { 
            display: none;
        }
        
        .glass-effect {
            background: rgba(42, 42, 44, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .setting-card {
            transition: all 0.2s ease;
        }
        
        .setting-card:hover {
            background: rgba(99, 102, 241, 0.05);
            transform: translateX(4px);
        }
        
        .toggle-checkbox:checked {
            background-color: #6366f1;
            border-color: #6366f1;
        }
        
        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Light Mode Styles - Modern Clean Design */
        body.light-mode {
            background-color: #f7f8fa !important;
        }
        
        /* Sidebar - Soft gradient with subtle border */
        body.light-mode #sidebar {
            background: linear-gradient(180deg, #fefefe 0%, #f9fafb 100%) !important;
            border-color: #e5e7eb !important;
            box-shadow: 1px 0 3px rgba(0, 0, 0, 0.03) !important;
        }
        
        /* Text colors - Strong hierarchy */
        body.light-mode .text-white {
            color: #111827 !important;
            font-weight: 500;
        }
        
        body.light-mode .text-gray-400 {
            color: #6b7280 !important;
        }
        
        body.light-mode .text-gray-500 {
            color: #9ca3af !important;
        }
        
        body.light-mode .text-gray-600 {
            color: #4b5563 !important;
        }
        
        /* Glass effect - Clean cards with shadows */
        body.light-mode .glass-effect {
            background: #ffffff !important;
            border: 1px solid #e5e7eb !important;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.03), 0 1px 3px 0 rgba(0, 0, 0, 0.04) !important;
            border-radius: 12px !important;
        }
        
        /* Borders - Subtle and clean */
        body.light-mode .border-b,
        body.light-mode .border-t,
        body.light-mode .border-r {
            border-color: #e5e7eb !important;
        }
        
        /* Form inputs - Clean white with subtle shadows */
        body.light-mode .bg-gray-800,
        body.light-mode .bg-gray-700 {
            background-color: #ffffff !important;
            border-color: #d1d5db !important;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03) !important;
            border-radius: 10px !important;
        }
        
        body.light-mode .bg-gray-800\/50 {
            background-color: #f3f4f6 !important;
        }
        
        body.light-mode input,
        body.light-mode select {
            color: #111827 !important;
            background-color: #ffffff !important;
            font-weight: 400;
        }
        
        body.light-mode input::placeholder {
            color: #9ca3af !important;
        }
        
        body.light-mode input:focus,
        body.light-mode select:focus {
            border-color: #6366f1 !important;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.08), 0 1px 2px rgba(0, 0, 0, 0.03) !important;
            outline: none !important;
        }
        
        body.light-mode input:read-only {
            background-color: #f9fafb !important;
            color: #6b7280 !important;
            border-color: #e5e7eb !important;
        }
        
        /* Hover states - Subtle interactions */
        body.light-mode .hover\:text-white:hover {
            color: #111827 !important;
        }
        
        body.light-mode .hover\:bg-gray-800\/50:hover {
            background-color: #f3f4f6 !important;
            border-radius: 10px !important;
        }
        
        /* Setting cards - Hover effects */
        body.light-mode .setting-card {
            border-radius: 12px !important;
            transition: all 0.2s ease !important;
        }
        
        body.light-mode .setting-card:hover {
            background: #fafbfc !important;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02) !important;
            transform: translateX(2px) !important;
        }
        
        /* Navigation items - Modern active state */
        body.light-mode .nav-item {
            border-radius: 10px !important;
            margin: 2px 0 !important;
            transition: all 0.2s ease !important;
        }
        
        body.light-mode .nav-item.active {
            background: linear-gradient(90deg, #eef2ff 0%, #e0e7ff 100%) !important;
            border-left: 3px solid #6366f1 !important;
            box-shadow: 0 1px 3px rgba(99, 102, 241, 0.1) !important;
        }
        
        body.light-mode .nav-item:hover {
            background-color: #f3f4f6 !important;
            transform: translateX(2px) !important;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05) !important;
        }
        
        /* Theme buttons - Clean cards */
        body.light-mode .theme-btn {
            background-color: #ffffff !important;
            border-color: #d1d5db !important;
            border-radius: 12px !important;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03) !important;
            transition: all 0.2s ease !important;
        }
        
        body.light-mode .theme-btn:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.06), 0 2px 4px rgba(0, 0, 0, 0.04) !important;
            transform: translateY(-2px) !important;
        }
        
        body.light-mode .theme-btn.border-indigo-500 {
            border-color: #6366f1 !important;
            background-color: #ffffff !important;
            box-shadow: 0 2px 4px rgba(99, 102, 241, 0.1) !important;
        }
        
        /* Buttons - Rounded with shadows */
        body.light-mode button {
            border-radius: 10px !important;
        }
        
        body.light-mode #saveProfileBtn,
        body.light-mode #changePasswordBtn {
            box-shadow: 0 2px 4px rgba(99, 102, 241, 0.2) !important;
        }
        
        body.light-mode #saveProfileBtn:hover,
        body.light-mode #changePasswordBtn:hover {
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.3) !important;
        }
        
        /* User section */
        body.light-mode #userName {
            color: #111827 !important;
            font-weight: 600;
        }
        
        body.light-mode #userInitial {
            color: #ffffff !important;
        }
        
        /* Top bar - Clean header */
        body.light-mode .border-b.px-6 {
            background: #ffffff !important;
            border-color: #e5e7eb !important;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.02) !important;
        }
        
        /* Main content area */
        body.light-mode .flex-1.flex.flex-col {
            background-color: #f7f8fa !important;
        }
        
        /* Heading styles */
        body.light-mode h1, 
        body.light-mode h2, 
        body.light-mode h3 {
            color: #111827 !important;
            font-weight: 600;
        }
        
        /* Subtext */
        body.light-mode p {
            color: #6b7280 !important;
        }
        
        /* Profile section background */
        body.light-mode .p-4.border-t {
            background: linear-gradient(180deg, #fefefe 0%, #f9fafb 100%) !important;
        }
        
        /* Back to Chat button */
        body.light-mode a[href="/chat"] {
            box-shadow: 0 2px 4px rgba(99, 102, 241, 0.2) !important;
            border-radius: 12px !important;
        }
        
        body.light-mode a[href="/chat"]:hover {
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.3) !important;
        }
        
        /* Sidebar header section - Fix for light mode */
        body.light-mode .p-5.border-b {
            background: #ffffff !important;
            border-color: #e5e7eb !important;
        }
        
        body.light-mode .propeller-font {
            color: #111827 !important;
        }
        
        /* Sidebar Header - Light mode override for inline styles */
        body.light-mode .p-5.border-b {
            background: #ffffff !important;
            border-color: #e5e7eb !important;
        }
        
        /* User Info Section at Bottom - Light mode */
        body.light-mode .p-4.border-t {
            background: #ffffff !important;
            border-color: #e5e7eb !important;
        }
    </style>
</head>
<body class="font-['Inter'] h-screen overflow-hidden" style="background-color: #1f1f21;">
    <div class="flex h-full">
        <!-- Sidebar -->
        <div id="sidebar" class="sidebar-transition shadow-2xl border-r flex flex-col" style="width: 300px; background: linear-gradient(180deg, #0f0f11 0%, #1a1a1c 100%); border-color: #2a2a2c;">
            <!-- Sidebar Header -->
            <div class="p-5 border-b" style="border-color: #2a2a2c; background: rgba(15, 15, 17, 0.8);">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center space-x-3">
                        <img id="sidebarLogo" src="assets/images/logo.png" alt="Propeller Logo" class="w-11 h-11 rounded-xl shadow-lg">
                        <div class="propeller-font font-bold text-xl text-white">
                            Propeller
                        </div>
                    </div>
                </div>
                
                <!-- Back to Chat Button -->
                <a href="/chat" class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3.5 px-4 rounded-xl font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 shadow-lg flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    <span>Back to Chat</span>
                </a>
            </div>
            
            <!-- Settings Navigation -->
            <div class="flex-1 overflow-y-auto scrollbar-hide px-3 py-4">
                <div class="space-y-1">
                    <div class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 px-3">Settings</div>
                    
                    <button class="nav-item active w-full text-left px-4 py-3 rounded-lg text-white font-medium flex items-center space-x-3 hover:bg-gray-800/50 transition-colors" data-tab="general" style="background: linear-gradient(90deg, rgba(99, 102, 241, 0.2), rgba(168, 85, 247, 0.1)); border-left: 3px solid #6366f1;">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        <span>General</span>
                    </button>
                    
                    <button class="nav-item w-full text-left px-4 py-3 rounded-lg text-gray-400 font-medium flex items-center space-x-3 hover:bg-gray-800/50 hover:text-white transition-colors" data-tab="account">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                        <span>Account</span>
                    </button>
                    
                    <button class="nav-item w-full text-left px-4 py-3 rounded-lg text-gray-400 font-medium flex items-center space-x-3 hover:bg-gray-800/50 hover:text-white transition-colors" data-tab="appearance">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/>
                        </svg>
                        <span>Appearance</span>
                    </button>
                    
                    <button class="nav-item w-full text-left px-4 py-3 rounded-lg text-gray-400 font-medium flex items-center space-x-3 hover:bg-gray-800/50 hover:text-white transition-colors" data-tab="usage">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                        </svg>
                        <span>Usage</span>
                    </button>
                    
                    <button class="nav-item w-full text-left px-4 py-3 rounded-lg text-gray-400 font-medium flex items-center space-x-3 hover:bg-gray-800/50 hover:text-white transition-colors" data-tab="privacy">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                        </svg>
                        <span>Privacy & Security</span>
                    </button>
                    
                    <button class="nav-item w-full text-left px-4 py-3 rounded-lg text-gray-400 font-medium flex items-center space-x-3 hover:bg-gray-800/50 hover:text-white transition-colors" data-tab="notifications">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                        </svg>
                        <span>Notifications</span>
                    </button>
                    
                    <button class="nav-item w-full text-left px-4 py-3 rounded-lg text-gray-400 font-medium flex items-center space-x-3 hover:bg-gray-800/50 hover:text-white transition-colors" data-tab="data">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"/>
                        </svg>
                        <span>Data & Storage</span>
                    </button>
                    
                    <button class="nav-item w-full text-left px-4 py-3 rounded-lg text-gray-400 font-medium flex items-center space-x-3 hover:bg-gray-800/50 hover:text-white transition-colors" data-tab="about">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span>About</span>
                    </button>
                </div>
            </div>
            
            <!-- User Info -->
            <div class="p-4 border-t" style="border-color: #2a2a2c; background: rgba(15, 15, 17, 0.8);">
                <div class="flex items-center space-x-3 p-3 rounded-xl" style="background: rgba(99, 102, 241, 0.1);">
                    <div class="w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center ring-2 ring-indigo-500/30">
                        <span class="text-white text-sm font-bold" id="userInitial">U</span>
                    </div>
                    <div class="flex-1">
                        <div class="text-sm font-semibold text-white" id="userName">User Name</div>
                        <div class="text-xs text-gray-400">Free Plan</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Content Area -->
        <div class="flex-1 flex flex-col overflow-hidden" style="background-color: #1f1f21;">
            <!-- Top Bar -->
            <div class="border-b px-6 py-4" style="border-color: #2a2a2c; background: rgba(31, 31, 33, 0.8); backdrop-filter: blur(12px);">
                <h1 class="text-white font-bold text-2xl">Settings</h1>
                <p class="text-gray-400 text-sm mt-1">Manage your account and preferences</p>
            </div>
            
            <!-- Content Container -->
            <div class="flex-1 overflow-y-auto scrollbar-hide p-6">
                <div class="max-w-4xl mx-auto">
                    
                    <!-- General Tab -->
                    <div id="generalTab" class="tab-content fade-in">
                        <h2 class="text-2xl font-bold text-white mb-6">General Settings</h2>
                        
                        <!-- Language & Region -->
                        <div class="glass-effect rounded-xl p-6 mb-4 setting-card">
                            <h3 class="text-white font-semibold text-lg mb-4">Language & Region</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">Display Language</label>
                                    <select id="languageSelect" class="w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:outline-none focus:border-indigo-500">
                                        <option value="en">English</option>
                                        <option value="hi">Hindi (हिन्दी)</option>
                                        <option value="es">Spanish (Español)</option>
                                        <option value="fr">French (Français)</option>
                                        <option value="de">German (Deutsch)</option>
                                        <option value="zh">Chinese (中文)</option>
                                        <option value="ja">Japanese (日本語)</option>
                                        <option value="ar">Arabic (العربية)</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">Time Zone</label>
                                    <select id="timezoneSelect" class="w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:outline-none focus:border-indigo-500">
                                        <option value="auto">Auto-detect</option>
                                        <option value="UTC">UTC</option>
                                        <option value="America/New_York">Eastern Time (US)</option>
                                        <option value="America/Los_Angeles">Pacific Time (US)</option>
                                        <option value="Europe/London">London</option>
                                        <option value="Europe/Paris">Paris</option>
                                        <option value="Asia/Tokyo">Tokyo</option>
                                        <option value="Asia/Kolkata">India</option>
                                        <option value="Asia/Dubai">Dubai</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Chat Preferences -->
                        <div class="glass-effect rounded-xl p-6 mb-4 setting-card">
                            <h3 class="text-white font-semibold text-lg mb-4">Chat Preferences</h3>
                            
                            <div class="space-y-4">
                                <div class="flex items-start justify-between py-3 border-b border-gray-700/30">
                                    <div class="flex-1">
                                        <h4 class="text-white font-medium mb-1">Auto-save Chats</h4>
                                        <p class="text-gray-400 text-sm">Automatically save conversations every 30 seconds</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer ml-4">
                                        <input type="checkbox" class="sr-only peer toggle-checkbox" id="autoSaveToggle" checked>
                                        <div class="w-14 h-7 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-start justify-between py-3 border-b border-gray-700/30">
                                    <div class="flex-1">
                                        <h4 class="text-white font-medium mb-1">Enter to Send</h4>
                                        <p class="text-gray-400 text-sm">Press Enter to send messages (Shift+Enter for new line)</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer ml-4">
                                        <input type="checkbox" class="sr-only peer toggle-checkbox" id="enterToSendToggle" checked>
                                        <div class="w-14 h-7 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-start justify-between py-3 border-b border-gray-700/30">
                                    <div class="flex-1">
                                        <h4 class="text-white font-medium mb-1">Show Typing Indicator</h4>
                                        <p class="text-gray-400 text-sm">Display animated typing indicator when AI is responding</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer ml-4">
                                        <input type="checkbox" class="sr-only peer toggle-checkbox" id="typingIndicatorToggle" checked>
                                        <div class="w-14 h-7 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-start justify-between py-3">
                                    <div class="flex-1">
                                        <h4 class="text-white font-medium mb-1">Code Syntax Highlighting</h4>
                                        <p class="text-gray-400 text-sm">Enable syntax highlighting for code blocks</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer ml-4">
                                        <input type="checkbox" class="sr-only peer toggle-checkbox" id="syntaxHighlightToggle" checked>
                                        <div class="w-14 h-7 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600"></div>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Response Format -->
                        <div class="glass-effect rounded-xl p-6 mb-4 setting-card">
                            <h3 class="text-white font-semibold text-lg mb-4">Response Format</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">Default Response Length</label>
                                    <select id="responseLengthSelect" class="w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:outline-none focus:border-indigo-500">
                                        <option value="concise">Concise - Brief and to the point</option>
                                        <option value="balanced" selected>Balanced - Moderate detail</option>
                                        <option value="detailed">Detailed - Comprehensive explanations</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">Response Tone</label>
                                    <select id="responseToneSelect" class="w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:outline-none focus:border-indigo-500">
                                        <option value="professional">Professional</option>
                                        <option value="friendly" selected>Friendly</option>
                                        <option value="casual">Casual</option>
                                        <option value="technical">Technical</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Accessibility -->
                        <div class="glass-effect rounded-xl p-6 mb-4 setting-card">
                            <h3 class="text-white font-semibold text-lg mb-4">Accessibility</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">Font Size</label>
                                    <select id="fontSizeSelect" class="w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:outline-none focus:border-indigo-500">
                                        <option value="small">Small</option>
                                        <option value="medium" selected>Medium (Default)</option>
                                        <option value="large">Large</option>
                                        <option value="extra-large">Extra Large</option>
                                    </select>
                                </div>
                                
                                <div class="flex items-start justify-between py-3">
                                    <div class="flex-1">
                                        <h4 class="text-white font-medium mb-1">Reduce Motion</h4>
                                        <p class="text-gray-400 text-sm">Minimize animations and transitions</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer ml-4">
                                        <input type="checkbox" class="sr-only peer toggle-checkbox" id="reduceMotionToggle">
                                        <div class="w-14 h-7 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600"></div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Account Tab -->
                    <div id="accountTab" class="tab-content hidden">
                        <h2 class="text-2xl font-bold text-white mb-6">Account Settings</h2>
                        
                        <div class="glass-effect rounded-xl p-6 mb-4">
                            <h3 class="text-white font-semibold text-lg mb-4">Profile Information</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">Full Name</label>
                                    <input type="text" id="profileName" class="w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:outline-none focus:border-indigo-500" placeholder="Your name">
                                </div>
                                
                                <div>
                                    <label class="block text-gray-400 text-sm mb-2">Email Address (Read Only)</label>
                                    <input type="email" id="profileEmail" class="w-full bg-gray-700 text-gray-400 px-4 py-3 rounded-lg border border-gray-700 cursor-not-allowed" placeholder="your@email.com" readonly>
                                </div>
                                
                                <button id="saveProfileBtn" class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all duration-200">
                                    Save Changes
                                </button>
                                <div id="profileMessage" class="text-sm hidden"></div>
                            </div>
                        </div>
                        
                        <!-- Account Info Note -->
                        <div class="glass-effect rounded-xl p-6 mb-4">
                            <h3 class="text-white font-semibold text-lg mb-4">Authentication</h3>
                            <div class="flex items-start space-x-3">
                                <svg class="w-6 h-6 text-indigo-400 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                <div>
                                    <p class="text-gray-300 mb-2">You're signed in with Google</p>
                                    <p class="text-gray-400 text-sm">Your account is secured by Google's authentication system. Password management is handled through your Google account.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Appearance Tab -->
                    <div id="appearanceTab" class="tab-content hidden">
                        <h2 class="text-2xl font-bold text-white mb-6">Appearance</h2>
                        
                        <div class="glass-effect rounded-xl p-6 mb-4 setting-card">
                            <h3 class="text-white font-semibold text-lg mb-4">Theme</h3>
                            <div class="grid grid-cols-3 gap-4">
                                <button class="theme-btn p-4 rounded-lg border-2 border-indigo-500 bg-gray-900 text-white font-medium" data-theme="dark">
                                    <div class="w-full h-20 bg-gradient-to-br from-gray-900 to-black rounded mb-3"></div>
                                    Dark
                                </button>
                                <button class="theme-btn p-4 rounded-lg border-2 border-gray-700 bg-gray-800 text-white font-medium hover:border-indigo-500" data-theme="light">
                                    <div class="w-full h-20 bg-gradient-to-br from-gray-100 to-white rounded mb-3"></div>
                                    Light
                                </button>
                                <button class="theme-btn p-4 rounded-lg border-2 border-gray-700 bg-gray-800 text-white font-medium hover:border-indigo-500" data-theme="auto">
                                    <div class="w-full h-20 rounded mb-3 flex overflow-hidden">
                                        <div class="w-1/2 bg-white"></div>
                                        <div class="w-px bg-gray-400"></div>
                                        <div class="w-1/2 bg-black"></div>
                                    </div>
                                    Auto
                                </button>
                            </div>
                            <p class="text-gray-400 text-sm mt-4">Current theme: <span id="currentTheme" class="text-indigo-400 font-semibold">Dark</span></p>
                        </div>
                    </div>
                    
                    <!-- Usage Tab -->
                    <div id="usageTab" class="tab-content hidden">
                        <h2 class="text-2xl font-bold text-white mb-6">Usage & Limits</h2>
                        
                        <!-- Image Upload Usage -->
                        <div class="glass-effect rounded-xl p-6 mb-4">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <h3 class="text-white font-semibold text-lg mb-1">Image Upload Limit</h3>
                                    <p class="text-gray-400 text-sm">Track your daily image upload usage</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-3xl font-bold text-white" id="imageUsageCount">-</div>
                                    <div class="text-sm text-gray-400">of 2 images</div>
                                </div>
                            </div>
                            
                            <!-- Progress Bar -->
                            <div class="mb-4">
                                <div class="w-full bg-gray-700 rounded-full h-3 overflow-hidden">
                                    <div id="imageUsageBar" class="h-full bg-gradient-to-r from-indigo-500 to-purple-600 transition-all duration-500" style="width: 0%"></div>
                                </div>
                            </div>
                            
                            <!-- Usage Details -->
                            <div class="space-y-3">
                                <div class="flex items-center justify-between py-2 border-b border-gray-700/50">
                                    <span class="text-gray-400 text-sm">Used Today</span>
                                    <span class="text-white font-semibold" id="imageUsed">-</span>
                                </div>
                                <div class="flex items-center justify-between py-2 border-b border-gray-700/50">
                                    <span class="text-gray-400 text-sm">Remaining</span>
                                    <span class="text-white font-semibold" id="imageRemaining">-</span>
                                </div>
                                <div class="flex items-center justify-between py-2 border-b border-gray-700/50">
                                    <span class="text-gray-400 text-sm">Daily Limit</span>
                                    <span class="text-white font-semibold">2 images</span>
                                </div>
                                <div class="flex items-center justify-between py-2">
                                    <span class="text-gray-400 text-sm">Cooldown Period</span>
                                    <span class="text-white font-semibold">24 hours</span>
                                </div>
                            </div>
                            
                            <!-- Cooldown Warning -->
                            <div id="cooldownWarning" class="hidden mt-4 p-4 rounded-lg" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3);">
                                <div class="flex items-start space-x-3">
                                    <svg class="w-5 h-5 text-red-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    <div class="flex-1">
                                        <p class="text-red-300 text-sm font-semibold mb-1">Upload Limit Reached</p>
                                        <p class="text-red-400 text-sm" id="cooldownMessage">You've reached your daily limit. Cooldown active.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Reset Info -->
                            <div class="mt-4 p-4 rounded-lg" style="background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.2);">
                                <div class="flex items-start space-x-3">
                                    <svg class="w-5 h-5 text-indigo-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    <div class="flex-1">
                                        <p class="text-indigo-300 text-sm font-semibold mb-1">Usage Reset</p>
                                        <p class="text-indigo-400 text-sm" id="resetMessage">Your limit resets 24 hours after your first upload.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Refresh Button -->
                            <button id="refreshUsageBtn" class="mt-4 w-full bg-gray-800 text-white py-3 px-4 rounded-lg font-semibold hover:bg-gray-700 transition-all duration-200 flex items-center justify-center space-x-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                </svg>
                                <span>Refresh Usage</span>
                            </button>
                        </div>
                        
                        <!-- Plan Information -->
                        <div class="glass-effect rounded-xl p-6 mb-4">
                            <h3 class="text-white font-semibold text-lg mb-4">Current Plan</h3>
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-2xl font-bold text-white mb-1">Free Plan</p>
                                    <p class="text-gray-400 text-sm">Basic features with usage limits</p>
                                </div>
                                <div class="px-4 py-2 rounded-lg" style="background: rgba(99, 102, 241, 0.2);">
                                    <span class="text-indigo-400 font-semibold">Active</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Privacy Tab -->
                    <div id="privacyTab" class="tab-content hidden">
                        <h2 class="text-2xl font-bold text-white mb-6">Privacy & Security</h2>
                        
                        <div class="glass-effect rounded-xl p-6 mb-4 setting-card">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <h3 class="text-white font-semibold text-lg mb-1">Save Chat History</h3>
                                    <p class="text-gray-400 text-sm">Store your conversations for future reference</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer toggle-checkbox" checked>
                                    <div class="w-14 h-7 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600"></div>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notifications Tab -->
                    <div id="notificationsTab" class="tab-content hidden">
                        <h2 class="text-2xl font-bold text-white mb-6">Notification Preferences</h2>
                        
                        <!-- Email Notifications -->
                        <div class="glass-effect rounded-xl p-6 mb-4 setting-card">
                            <h3 class="text-white font-semibold text-lg mb-4">Email Notifications</h3>
                            
                            <div class="space-y-4">
                                <div class="flex items-start justify-between py-3 border-b border-gray-700/30">
                                    <div class="flex-1">
                                        <h4 class="text-white font-medium mb-1">Product Updates</h4>
                                        <p class="text-gray-400 text-sm">Get notified about new features and updates</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer ml-4">
                                        <input type="checkbox" class="sr-only peer toggle-checkbox" id="emailUpdates" checked>
                                        <div class="w-14 h-7 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-start justify-between py-3 border-b border-gray-700/30">
                                    <div class="flex-1">
                                        <h4 class="text-white font-medium mb-1">Usage Alerts</h4>
                                        <p class="text-gray-400 text-sm">Notify when approaching usage limits</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer ml-4">
                                        <input type="checkbox" class="sr-only peer toggle-checkbox" id="emailUsage" checked>
                                        <div class="w-14 h-7 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-start justify-between py-3">
                                    <div class="flex-1">
                                        <h4 class="text-white font-medium mb-1">Weekly Summary</h4>
                                        <p class="text-gray-400 text-sm">Receive weekly usage and activity summary</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer ml-4">
                                        <input type="checkbox" class="sr-only peer toggle-checkbox" id="emailWeekly">
                                        <div class="w-14 h-7 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600"></div>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Push Notifications -->
                        <div class="glass-effect rounded-xl p-6 mb-4 setting-card">
                            <h3 class="text-white font-semibold text-lg mb-4">Push Notifications</h3>
                            
                            <div class="space-y-4">
                                <div class="flex items-start justify-between py-3 border-b border-gray-700/30">
                                    <div class="flex-1">
                                        <h4 class="text-white font-medium mb-1">Desktop Notifications</h4>
                                        <p class="text-gray-400 text-sm">Show notifications on your desktop</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer ml-4">
                                        <input type="checkbox" class="sr-only peer toggle-checkbox" id="pushDesktop" checked>
                                        <div class="w-14 h-7 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-start justify-between py-3">
                                    <div class="flex-1">
                                        <h4 class="text-white font-medium mb-1">Sound Alerts</h4>
                                        <p class="text-gray-400 text-sm">Play sound for important notifications</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer ml-4">
                                        <input type="checkbox" class="sr-only peer toggle-checkbox" id="pushSound">
                                        <div class="w-14 h-7 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600"></div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Data & Storage Tab -->
                    <div id="dataTab" class="tab-content hidden">
                        <h2 class="text-2xl font-bold text-white mb-6">Data & Storage</h2>
                        
                        <!-- Storage Overview -->
                        <div class="glass-effect rounded-xl p-6 mb-4">
                            <h3 class="text-white font-semibold text-lg mb-4">Storage Usage</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-gray-400 text-sm">Chat History</span>
                                        <span class="text-white font-semibold" id="chatStorageSize">-</span>
                                    </div>
                                    <div class="w-full bg-gray-700 rounded-full h-2 overflow-hidden">
                                        <div class="h-full bg-gradient-to-r from-indigo-500 to-purple-600" style="width: 0%" id="chatStorageBar"></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-gray-400 text-sm">Uploaded Images</span>
                                        <span class="text-white font-semibold" id="imageStorageSize">-</span>
                                    </div>
                                    <div class="w-full bg-gray-700 rounded-full h-2 overflow-hidden">
                                        <div class="h-full bg-gradient-to-r from-purple-500 to-pink-600" style="width: 0%" id="imageStorageBar"></div>
                                    </div>
                                </div>
                                
                                <div class="pt-4 border-t border-gray-700/30">
                                    <div class="flex items-center justify-between">
                                        <span class="text-gray-400">Total Storage Used</span>
                                        <span class="text-white font-bold text-lg" id="totalStorageSize">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Data Management -->
                        <div class="glass-effect rounded-xl p-6 mb-4">
                            <h3 class="text-white font-semibold text-lg mb-4">Data Management</h3>
                            
                            <div class="space-y-3">
                                <button class="w-full p-4 text-left rounded-lg border border-gray-700 hover:border-indigo-500 transition-all flex items-center justify-between group" id="exportDataBtn">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 rounded-lg bg-indigo-600/20 flex items-center justify-center group-hover:bg-indigo-600/30 transition-colors">
                                            <svg class="w-5 h-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <h4 class="text-white font-medium">Export My Data</h4>
                                            <p class="text-gray-400 text-sm">Download all your chats and data</p>
                                        </div>
                                    </div>
                                    <svg class="w-5 h-5 text-gray-400 group-hover:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                    </svg>
                                </button>
                                
                                <button class="w-full p-4 text-left rounded-lg border border-gray-700 hover:border-yellow-500 transition-all flex items-center justify-between group" id="clearCacheBtn">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 rounded-lg bg-yellow-600/20 flex items-center justify-center group-hover:bg-yellow-600/30 transition-colors">
                                            <svg class="w-5 h-5 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <h4 class="text-white font-medium">Clear Cache</h4>
                                            <p class="text-gray-400 text-sm">Remove temporary files and data</p>
                                        </div>
                                    </div>
                                    <svg class="w-5 h-5 text-gray-400 group-hover:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                    </svg>
                                </button>
                                
                                <button class="w-full p-4 text-left rounded-lg border border-gray-700 hover:border-red-500 transition-all flex items-center justify-between group" id="deleteAllDataBtn">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 rounded-lg bg-red-600/20 flex items-center justify-center group-hover:bg-red-600/30 transition-colors">
                                            <svg class="w-5 h-5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <h4 class="text-white font-medium">Delete All Data</h4>
                                            <p class="text-gray-400 text-sm">Permanently delete all your data</p>
                                        </div>
                                    </div>
                                    <svg class="w-5 h-5 text-gray-400 group-hover:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Auto-Delete Settings -->
                        <div class="glass-effect rounded-xl p-6 mb-4 setting-card">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <h3 class="text-white font-semibold text-lg mb-1">Auto-Delete Old Chats</h3>
                                    <p class="text-gray-400 text-sm mb-3">Automatically delete chats older than a specified period</p>
                                    <select id="autoDeleteSelect" class="bg-gray-800 text-white px-4 py-2 rounded-lg border border-gray-700 focus:outline-none focus:border-indigo-500 disabled:opacity-50" disabled>
                                        <option value="never">Never</option>
                                        <option value="30">30 days</option>
                                        <option value="90">90 days</option>
                                        <option value="180">6 months</option>
                                        <option value="365">1 year</option>
                                    </select>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer ml-4">
                                    <input type="checkbox" class="sr-only peer toggle-checkbox" id="autoDeleteToggle">
                                    <div class="w-14 h-7 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-indigo-600"></div>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- About Tab -->
                    <div id="aboutTab" class="tab-content hidden">
                        <h2 class="text-2xl font-bold text-white mb-6">About Propeller</h2>
                        
                        <div class="glass-effect rounded-xl p-6 mb-4 text-center">
                            <div class="mx-auto mb-4 flex items-center justify-center">
                                <img src="assets/images/logo.png" alt="Propeller Logo" class="w-20 h-20 rounded-2xl shadow-2xl">
                            </div>
                            <h3 class="propeller-font text-3xl font-bold text-white mb-2">Propeller AI</h3>
                            <p class="text-gray-400 mb-4">Version 1.0.0</p>
                            <p class="text-gray-400 text-sm max-w-md mx-auto">Your intelligent AI assistant for productive conversations and creative tasks.</p>
                        </div>
                        
                        <div class="text-center mt-8">
                            <p class="text-gray-500 text-sm">&copy; 2024 Propeller AI. All rights reserved.</p>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize user info from server
        async function initializeUser() {
            try {
                const response = await fetch('/api/auth/user');
                if (response.ok) {
                    const data = await response.json();
                    const user = data.user;
                    
                    // Store user data
                    localStorage.setItem('propellerCurrentUser', JSON.stringify(user));
                    
                    // Update UI with user info
                    document.getElementById('userName').textContent = user.name;
                    
                    // Update profile picture or initial
                    const userInitialElement = document.getElementById('userInitial');
                    
                    if (user.picture) {
                        // Replace the gradient container with profile picture
                        const profileContainer = userInitialElement.parentElement;
                        profileContainer.className = 'w-10 h-10 rounded-full flex items-center justify-center ring-2 ring-indigo-500/30 overflow-hidden bg-gray-800';
                        profileContainer.innerHTML = `<img src="${user.picture}" alt="${user.name}" class="w-full h-full object-cover" onerror="this.style.display='none'; this.parentElement.innerHTML='<span class=\\'text-white text-sm font-bold\\'>${user.name.charAt(0).toUpperCase()}</span>';">`;
                    } else {
                        // Use initial if no picture
                        userInitialElement.textContent = user.name.charAt(0).toUpperCase();
                    }
                    
                    // Set profile fields
                    if (document.getElementById('profileName')) {
                        document.getElementById('profileName').value = user.name;
                        document.getElementById('profileEmail').value = user.email;
                    }
                } else {
                    // Not logged in, redirect to auth
                    window.location.href = '/auth';
                }
            } catch (error) {
                console.error('Error fetching user:', error);
                // Use fallback data
                const currentUser = JSON.parse(localStorage.getItem('propellerCurrentUser') || '{"name": "User", "email": "user@example.com"}');
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userInitial').textContent = currentUser.name.charAt(0).toUpperCase();
                
                // Set profile fields
                if (document.getElementById('profileName')) {
                    document.getElementById('profileName').value = currentUser.name;
                    document.getElementById('profileEmail').value = currentUser.email;
                }
            }
        }
        
        // Initialize user on page load
        initializeUser();

        // Tab Navigation
        const navItems = document.querySelectorAll('.nav-item');
        const tabContents = document.querySelectorAll('.tab-content');
        
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const tabName = item.getAttribute('data-tab');
                
                navItems.forEach(nav => {
                    nav.classList.remove('active', 'text-white');
                    nav.classList.add('text-gray-400');
                    nav.style.background = '';
                    nav.style.borderLeft = '';
                });
                
                item.classList.add('active', 'text-white');
                item.classList.remove('text-gray-400');
                item.style.background = 'linear-gradient(90deg, rgba(99, 102, 241, 0.2), rgba(168, 85, 247, 0.1))';
                item.style.borderLeft = '3px solid #6366f1';
                
                tabContents.forEach(content => {
                    content.classList.add('hidden');
                });
                
                const selectedTab = document.getElementById(tabName + 'Tab');
                if (selectedTab) {
                    selectedTab.classList.remove('hidden');
                }
            });
        });

        // Language Selection
        const languageSelect = document.getElementById('languageSelect');
        const savedLanguage = localStorage.getItem('propellerLanguage') || 'en';
        languageSelect.value = savedLanguage;
        
        languageSelect.addEventListener('change', (e) => {
            localStorage.setItem('propellerLanguage', e.target.value);
            showMessage('Language preference saved!', 'success');
        });

        // Theme Selection
        const themeButtons = document.querySelectorAll('.theme-btn');
        const savedTheme = localStorage.getItem('propellerTheme') || 'dark';
        const currentThemeSpan = document.getElementById('currentTheme');
        
        // Set initial theme
        updateThemeUI(savedTheme);
        
        themeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const theme = btn.getAttribute('data-theme');
                localStorage.setItem('propellerTheme', theme);
                updateThemeUI(theme);
                applyTheme(theme);
                showMessage(`Theme changed to ${theme}`, 'success');
            });
        });
        
        function updateThemeUI(theme) {
            themeButtons.forEach(btn => {
                if (btn.getAttribute('data-theme') === theme) {
                    btn.classList.remove('border-gray-700');
                    btn.classList.add('border-indigo-500');
                } else {
                    btn.classList.remove('border-indigo-500');
                    btn.classList.add('border-gray-700');
                }
            });
            currentThemeSpan.textContent = theme.charAt(0).toUpperCase() + theme.slice(1);
        }
        
        function applyTheme(theme) {
            const body = document.body;
            let shouldBeLightMode = false;
            
            if (theme === 'light') {
                shouldBeLightMode = true;
            } else if (theme === 'dark') {
                shouldBeLightMode = false;
            } else {
                // Auto mode - detect system preference
                shouldBeLightMode = window.matchMedia('(prefers-color-scheme: light)').matches;
            }
            
            if (shouldBeLightMode) {
                body.classList.add('light-mode');
            } else {
                body.classList.remove('light-mode');
            }
            
            // Update logo based on theme
            updateLogo(shouldBeLightMode);
            
            // Notify other tabs
            localStorage.setItem('propellerTheme', theme);
        }
        
        // Function to update logo based on theme
        function updateLogo(isLightMode) {
            const logoPath = isLightMode ? 'assets/images/logoo.png' : 'assets/images/logo.png';
            const sidebarLogo = document.getElementById('sidebarLogo');
            
            if (sidebarLogo) sidebarLogo.src = logoPath;
        }

        // Save Profile
        document.getElementById('saveProfileBtn').addEventListener('click', async () => {
            const name = document.getElementById('profileName').value.trim();
            
            if (!name) {
                showMessage('Please enter your name', 'error', 'profileMessage');
                return;
            }
            
            // Update user info locally
            const user = JSON.parse(localStorage.getItem('propellerCurrentUser') || '{}');
            user.name = name;
            localStorage.setItem('propellerCurrentUser', JSON.stringify(user));
            
            // Update display
            document.getElementById('userName').textContent = name;
            
            // Update initial or keep profile picture
            const userInitialElement = document.getElementById('userInitial');
            if (!user.picture && userInitialElement) {
                userInitialElement.textContent = name.charAt(0).toUpperCase();
            }
            
            showMessage('Profile updated successfully!', 'success', 'profileMessage');
        });

        // Helper function to show messages
        function showMessage(message, type = 'success', elementId = null) {
            if (elementId) {
                const msgElement = document.getElementById(elementId);
                msgElement.textContent = message;
                msgElement.className = `text-sm mt-2 font-medium ${type === 'success' ? 'text-green-500' : 'text-red-500'}`;
                msgElement.classList.remove('hidden');
                setTimeout(() => msgElement.classList.add('hidden'), 5000);
            } else {
                // Create modern toast notification
                const toast = document.createElement('div');
                
                const isError = type === 'error';
                const bgColor = isError ? 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)' : 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
                const icon = isError 
                    ? '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>'
                    : '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>';
                
                toast.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <div class="flex-shrink-0">
                            ${icon}
                        </div>
                        <div class="flex-1">
                            <p class="text-sm font-semibold">${message}</p>
                        </div>
                        <button onclick="this.parentElement.parentElement.remove()" class="flex-shrink-0 ml-4 text-white/80 hover:text-white transition-colors">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                        </button>
                    </div>
                `;
                
                toast.style.cssText = `
                    position: fixed;
                    top: 24px;
                    right: 24px;
                    min-width: 320px;
                    max-width: 420px;
                    padding: 16px 20px;
                    background: ${bgColor};
                    color: white;
                    border-radius: 12px;
                    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2), 0 4px 12px rgba(0, 0, 0, 0.15);
                    z-index: 9999;
                    font-family: 'Inter', sans-serif;
                    opacity: 0;
                    transform: translateX(400px);
                    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                    backdrop-filter: blur(8px);
                `;
                
                document.body.appendChild(toast);
                
                // Trigger animation
                requestAnimationFrame(() => {
                    toast.style.opacity = '1';
                    toast.style.transform = 'translateX(0)';
                });
                
                // Auto dismiss
                setTimeout(() => {
                    toast.style.opacity = '0';
                    toast.style.transform = 'translateX(400px)';
                    setTimeout(() => toast.remove(), 400);
                }, 4000);
            }
        }
        
        // Apply theme on load
        applyTheme(savedTheme);
        
        // Listen for system theme changes when in auto mode
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            const currentTheme = localStorage.getItem('propellerTheme') || 'dark';
            if (currentTheme === 'auto') {
                applyTheme('auto');
            }
        });
        
        // Usage tracking functions
        async function loadUsageData() {
            try {
                const response = await fetch('/api/usage');
                if (response.ok) {
                    const data = await response.json();
                    updateUsageUI(data.imageUploads);
                } else {
                    console.error('Failed to load usage data');
                }
            } catch (error) {
                console.error('Error loading usage data:', error);
            }
        }
        
        function updateUsageUI(imageUploads) {
            const { limit, used, remaining, cooldownActive, cooldownMinutes, resetIn } = imageUploads;
            
            // Update counts
            document.getElementById('imageUsageCount').textContent = used;
            document.getElementById('imageUsed').textContent = `${used} images`;
            document.getElementById('imageRemaining').textContent = `${remaining} images`;
            
            // Update progress bar
            const percentage = (used / limit) * 100;
            const progressBar = document.getElementById('imageUsageBar');
            progressBar.style.width = `${percentage}%`;
            
            // Change color based on usage
            if (percentage >= 100) {
                progressBar.className = 'h-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-500';
            } else if (percentage >= 50) {
                progressBar.className = 'h-full bg-gradient-to-r from-yellow-500 to-orange-600 transition-all duration-500';
            } else {
                progressBar.className = 'h-full bg-gradient-to-r from-indigo-500 to-purple-600 transition-all duration-500';
            }
            
            // Show/hide cooldown warning
            const cooldownWarning = document.getElementById('cooldownWarning');
            if (cooldownActive) {
                cooldownWarning.classList.remove('hidden');
                
                // Format cooldown message with hours and minutes
                const hours = Math.floor(cooldownMinutes / 60);
                const minutes = cooldownMinutes % 60;
                let timeText = '';
                if (hours > 0) {
                    timeText += `${hours} hour${hours > 1 ? 's' : ''}`;
                    if (minutes > 0) {
                        timeText += ` and ${minutes} minute${minutes !== 1 ? 's' : ''}`;
                    }
                } else {
                    timeText = `${minutes} minute${minutes !== 1 ? 's' : ''}`;
                }
                
                document.getElementById('cooldownMessage').textContent = 
                    `You've reached your daily limit. Please wait ${timeText} before uploading more images.`;
            } else {
                cooldownWarning.classList.add('hidden');
            }
            
            // Update reset message
            if (resetIn && resetIn > 0) {
                const hours = Math.floor(resetIn / 60);
                const minutes = resetIn % 60;
                let resetText = 'Your limit resets in ';
                if (hours > 0) {
                    resetText += `${hours} hour${hours > 1 ? 's' : ''} `;
                }
                if (minutes > 0 || hours === 0) {
                    resetText += `${minutes} minute${minutes !== 1 ? 's' : ''}`;
                }
                document.getElementById('resetMessage').textContent = resetText;
            } else {
                document.getElementById('resetMessage').textContent = 'Your limit resets 24 hours after your first upload.';
            }
        }
        
        // Refresh usage button
        document.getElementById('refreshUsageBtn').addEventListener('click', async () => {
            const btn = document.getElementById('refreshUsageBtn');
            const originalHTML = btn.innerHTML;
            
            btn.innerHTML = `
                <svg class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
                <span>Refreshing...</span>
            `;
            btn.disabled = true;
            
            await loadUsageData();
            
            setTimeout(() => {
                btn.innerHTML = originalHTML;
                btn.disabled = false;
                showMessage('Usage data refreshed!', 'success');
            }, 500);
        });
        
        // Load usage data when the usage tab is opened
        const usageNavBtn = document.querySelector('[data-tab="usage"]');
        if (usageNavBtn) {
            usageNavBtn.addEventListener('click', () => {
                loadUsageData();
            });
        }
        
        // Load usage data on page load if we're on the usage tab
        if (window.location.hash === '#usage') {
            // Switch to usage tab
            document.querySelector('[data-tab="usage"]').click();
        }
        
        // Data Management Functions
        document.getElementById('exportDataBtn')?.addEventListener('click', async () => {
            try {
                showMessage('Preparing your data export...', 'success');
                
                // Fetch user's chat history
                const response = await fetch('/api/chats');
                if (response.ok) {
                    const chats = await response.json();
                    
                    // Create export data
                    const exportData = {
                        exportDate: new Date().toISOString(),
                        user: JSON.parse(localStorage.getItem('propellerCurrentUser') || '{}'),
                        chats: chats,
                        settings: {
                            language: localStorage.getItem('propellerLanguage'),
                            theme: localStorage.getItem('propellerTheme')
                        }
                    };
                    
                    // Create and download file
                    const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `propeller-data-export-${new Date().toISOString().split('T')[0]}.json`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    showMessage('Data exported successfully!', 'success');
                } else {
                    throw new Error('Failed to fetch data');
                }
            } catch (error) {
                console.error('Export error:', error);
                showMessage('Failed to export data. Please try again.', 'error');
            }
        });
        
        document.getElementById('clearCacheBtn')?.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear the cache? This will remove temporary files and may require you to reload the page.')) {
                // Clear local storage cache items
                const keysToRemove = [];
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    if (key && (key.includes('cache') || key.includes('temp'))) {
                        keysToRemove.push(key);
                    }
                }
                keysToRemove.forEach(key => localStorage.removeItem(key));
                
                showMessage('Cache cleared successfully!', 'success');
                setTimeout(() => window.location.reload(), 1500);
            }
        });
        
        document.getElementById('deleteAllDataBtn')?.addEventListener('click', async () => {
            const confirmText = prompt('This will permanently delete ALL your data including chats and settings. Type "DELETE" to confirm:');
            
            if (confirmText === 'DELETE') {
                try {
                    // Delete all chats
                    const response = await fetch('/api/chats', { method: 'DELETE' });
                    
                    if (response.ok) {
                        // Clear local storage
                        localStorage.clear();
                        
                        showMessage('All data deleted successfully. Redirecting...', 'success');
                        setTimeout(() => window.location.href = '/auth', 2000);
                    } else {
                        throw new Error('Failed to delete data');
                    }
                } catch (error) {
                    console.error('Delete error:', error);
                    showMessage('Failed to delete data. Please try again.', 'error');
                }
            } else if (confirmText !== null) {
                showMessage('Deletion cancelled - incorrect confirmation text', 'error');
            }
        });
        
        // Auto-delete toggle
        const autoDeleteToggle = document.getElementById('autoDeleteToggle');
        const autoDeleteSelect = document.getElementById('autoDeleteSelect');
        
        autoDeleteToggle?.addEventListener('change', (e) => {
            autoDeleteSelect.disabled = !e.target.checked;
            if (e.target.checked) {
                localStorage.setItem('propellerAutoDelete', autoDeleteSelect.value);
                showMessage('Auto-delete enabled', 'success');
            } else {
                localStorage.removeItem('propellerAutoDelete');
                showMessage('Auto-delete disabled', 'success');
            }
        });
        
        autoDeleteSelect?.addEventListener('change', (e) => {
            localStorage.setItem('propellerAutoDelete', e.target.value);
            showMessage(`Auto-delete period set to ${e.target.selectedOptions[0].text}`, 'success');
        });
        
        // Load storage data
        function loadStorageData() {
            // Simulate storage calculation
            const chats = JSON.parse(localStorage.getItem('propellerChats') || '[]');
            const chatSize = new Blob([JSON.stringify(chats)]).size;
            const chatSizeKB = (chatSize / 1024).toFixed(2);
            
            // Estimate image storage (would need server endpoint for real data)
            const imageSizeKB = '0.00'; // Placeholder
            
            const totalSizeKB = (parseFloat(chatSizeKB) + parseFloat(imageSizeKB)).toFixed(2);
            
            document.getElementById('chatStorageSize').textContent = `${chatSizeKB} KB`;
            document.getElementById('imageStorageSize').textContent = `${imageSizeKB} KB`;
            document.getElementById('totalStorageSize').textContent = `${totalSizeKB} KB`;
            
            // Update progress bars
            const maxStorage = 1024; // 1 MB for demo
            document.getElementById('chatStorageBar').style.width = `${(parseFloat(chatSizeKB) / maxStorage) * 100}%`;
            document.getElementById('imageStorageBar').style.width = `${(parseFloat(imageSizeKB) / maxStorage) * 100}%`;
        }
        
        // Load storage when data tab is opened
        document.querySelector('[data-tab="data"]')?.addEventListener('click', loadStorageData);
        
        // Save all general settings to localStorage
        document.querySelectorAll('#generalTab select, #generalTab input[type="checkbox"]').forEach(element => {
            const key = `propeller_${element.id}`;
            
            // Load saved value
            const savedValue = localStorage.getItem(key);
            if (savedValue !== null) {
                if (element.type === 'checkbox') {
                    element.checked = savedValue === 'true';
                } else {
                    element.value = savedValue;
                }
            }
            
            // Save on change
            element.addEventListener('change', (e) => {
                const value = e.target.type === 'checkbox' ? e.target.checked : e.target.value;
                localStorage.setItem(key, value);
                
                // Show feedback for some settings
                if (element.id === 'fontSizeSelect') {
                    document.body.style.fontSize = value === 'small' ? '14px' : value === 'large' ? '18px' : value === 'extra-large' ? '20px' : '16px';
                }
                
                if (element.id === 'reduceMotionToggle') {
                    if (e.target.checked) {
                        document.body.style.setProperty('--animation-duration', '0s');
                    } else {
                        document.body.style.removeProperty('--animation-duration');
                    }
                }
                
                showMessage('Setting saved', 'success');
            });
        });
        
        // Notification preferences
        document.querySelectorAll('#notificationsTab input[type="checkbox"]').forEach(checkbox => {
            const key = `propeller_notif_${checkbox.id}`;
            
            // Load saved value
            const savedValue = localStorage.getItem(key);
            if (savedValue !== null) {
                checkbox.checked = savedValue === 'true';
            }
            
            // Save on change
            checkbox.addEventListener('change', (e) => {
                localStorage.setItem(key, e.target.checked);
                showMessage('Notification preference saved', 'success');
            });
        });
    </script>
</body>
</html>